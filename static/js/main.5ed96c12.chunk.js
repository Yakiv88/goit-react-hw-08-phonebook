(this["webpackJsonpreact-35-module-1"]=this["webpackJsonpreact-35-module-1"]||[]).push([[0],{110:function(e,t,n){e.exports={App:"App_App__F-nXy",title:"App_title__Leqx5"}},113:function(e,t,n){e.exports={btn:"UserMenu_btn__4ox4d"}},138:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(32),s=n.n(c),o=(n(138),n(110)),i=n.n(o),l=n(12),u=n(37),j=n.n(u),b=n(77),d=n.n(b),p=n(20),h=Object(p.b)("contacts/filter"),m=n(17),O=n(69),f=function(e){return e.contacts.items},x=function(e){return e.contacts.filter},g=Object(O.a)([f,x],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),v=n(1);var C=function(){var e=Object(m.c)(x),t=Object(m.b)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(v.Fragment,{}),Object(v.jsx)("div",{className:d.a.wrapper,children:Object(v.jsxs)("label",{className:d.a.label,children:["Find contacts by name",Object(v.jsx)("input",{className:d.a.input,type:"text",name:"name",value:e,onChange:function(e){return t(h(e.target.value))}})]})})]})},y=n(46),_=n.n(y),k=n(24),w=n.n(k),I=n(42),L=n(34),W=n.n(L);W.a.defaults.baseURL="https://61a60b9e8395690017be9007.mockapi.io";var N=Object(p.c)("contacts/fetchContacts",function(){var e=Object(I.a)(w.a.mark((function e(t,n){var a,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,W.a.get("/contacts");case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(p.c)("contacts/addContact",function(){var e=Object(I.a)(w.a.mark((function e(t,n){var a,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,W.a.post("/contacts",t);case 4:return r=e.sent,c=r.data,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),F=Object(p.c)("contacts/deleteContact",function(){var e=Object(I.a)(w.a.mark((function e(t,n){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWidthValue,e.prev=1,e.next=4,W.a.delete("/contacts/".concat(t));case 4:if(200!==e.sent.status){e.next=9;break}return e.abrupt("return",t);case 9:throw new Error({message:"error"});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),A={addContacts:S,deleteContacts:F,fetchContacts:N},T=n(29),U=function(){var e=Object(m.c)(g),t=Object(m.b)();return console.log(e),Object(a.useEffect)((function(){t(A.fetchContacts())}),[t]),Object(v.jsx)("div",{className:_.a.listWrapper,children:Object(v.jsx)("ul",{className:_.a.contactsList,children:e.map((function(e){var n=e.name,a=e.number,r=e.id;return Object(v.jsxs)("ol",{className:_.a.item,children:[Object(v.jsxs)("div",{className:_.a.textWrapper,children:[Object(v.jsxs)("p",{className:_.a.text,children:[n,":"]}),Object(v.jsx)("p",{className:_.a.text,children:a})]}),Object(v.jsx)("button",{className:_.a.button,type:"button",onClick:function(){return t(A.deleteContacts(r,T.b.success("Contact ".concat(n," has been deleted successfully!"))))},children:"Delete"})]},r)}))})})};var z=function(){var e=Object(a.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(l.a)(c,2),o=s[0],i=s[1],u=Object(m.c)(f),b=Object(m.b)(),d=function(e){switch(e.target.name){case"name":r(e.target.value);break;case"number":i(e.target.value);break;default:return}},p=function(){r(""),i("")};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:j.a.formWrapper,children:[Object(v.jsx)("h1",{className:j.a.title,children:"Phonebook"}),Object(v.jsxs)("form",{className:j.a.form,onSubmit:function(e){if(e.preventDefault(),u.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("This contact has already been added to the list");b(A.addContacts({name:n,number:o})),T.b.success("Contact ".concat(n," has been added to the list~")),p()},children:[Object(v.jsxs)("div",{className:j.a.labelWrapper,children:[Object(v.jsxs)("label",{className:j.a.label,children:["Name",Object(v.jsx)("input",{className:j.a.input,value:n,type:"text",name:"name",placeholder:"Name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",onChange:d})]}),Object(v.jsxs)("label",{className:j.a.label,children:["Number",Object(v.jsx)("input",{className:j.a.input,type:"tel",value:o,name:"number",placeholder:"Number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",onChange:d})]})]}),Object(v.jsx)("button",{className:j.a.button,children:"Add contact"})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{className:j.a.title,children:"Contacts"}),Object(v.jsx)(C,{}),Object(v.jsx)(U,{})]})]})},R=n(14),E={container:{minHeight:"calc(100vh - 50px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontWeight:500,fontSize:48,textAlign:"center"}},V=function(){return Object(v.jsx)("div",{style:E.container,children:Object(v.jsxs)("h1",{style:E.title,children:["Welcome! Here you can add and save your contacts! Try it out!"," "]})})};W.a.defaults.baseURL="https://connections-api.herokuapp.com";var D=function(e){W.a.defaults.headers.common.Authorization="Bearer ".concat(e)},q=Object(p.c)("auth/register",function(){var e=Object(I.a)(w.a.mark((function e(t,n){var a,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,W.a.post("/users/signup",t);case 4:return r=e.sent,c=r.data,D(c.token),e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(1),a(T.b.error("Oops! Try again please!"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(p.c)("auth/login",function(){var e=Object(I.a)(w.a.mark((function e(t,n){var a,r,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,W.a.post("/users/login",t);case 4:return r=e.sent,c=r.data,D(c.token),e.abrupt("return",c);case 10:e.prev=10,e.t0=e.catch(1),a(T.b.error("Oops! Try again please!"));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),M=Object(p.c)("users/logout",function(){var e=Object(I.a)(w.a.mark((function e(t,n){var a,r,c,s,o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.rejectWithValue,r=n.getState,c=r(),s=c.auth.token){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,fetch("https://connections-api.herokuapp.com/users/logout",{method:"POST",headers:{Authorization:"Bearer ".concat(s)}});case 8:return o=e.sent,e.next=11,o.json();case 11:return i=e.sent,e.abrupt("return",i);case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0.message),a(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}()),P=Object(p.c)("auth/refresh",function(){var e=Object(I.a)(w.a.mark((function e(t,n,a){var r,c,s,o,i;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.rejectWithValue,c=n.getState(),null!==(s=c.auth.token)){e.next=5;break}return e.abrupt("return",n.rejectWithValue());case 5:return D(s),e.prev=6,e.next=9,W.a.get("/users/current");case 9:return o=e.sent,i=o.data,e.abrupt("return",i);case 14:e.prev=14,e.t0=e.catch(6),r(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,n,a){return e.apply(this,arguments)}}()),Z={register:q,logIn:B,logOut:M,refreshCurrentUser:P},J={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsRefreshingCurrentUser:function(e){return e.auth.isRefreshingCurrentUser},getError:function(e){return e.auth.error}},H=n(222),G=n(223),X=n(212),Y=n(216),$=n(228),K=n(218),Q=n(226),ee=n(74),te=n.n(ee),ne=n(227),ae=n(225),re=n(118),ce=n(221),se=Object(re.a)();function oe(){var e=Object(m.b)(),t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(a.useState)(null),b=Object(l.a)(j,2),d=(b[0],b[1]),p=Object(m.c)(J.getIsLoggedIn),h=Object(m.c)(J.getError);Object(a.useEffect)((function(){d(h)}),[h]);var O=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"email":return c(a);case"password":return u(a);default:return}},f=function(t){t.preventDefault(),e(Z.logIn({email:r,password:i})),T.b.success("Congrats! You've just successfully signed in!"),c(""),u("")};return!p&&Object(v.jsx)(ce.a,{theme:se,children:Object(v.jsxs)(ae.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(X.a,{}),Object(v.jsxs)(Q.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(v.jsx)(H.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(v.jsx)(te.a,{})}),Object(v.jsx)(ne.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(v.jsxs)(Q.a,{component:"form",onSubmit:f,noValidate:!0,sx:{mt:1},children:[Object(v.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,label:"Email Address",id:"email",autoFocus:!0,type:"email",name:"email",value:r,onChange:O}),Object(v.jsx)(Y.a,{margin:"normal",required:!0,fullWidth:!0,label:"Password",id:"password",autoComplete:"current-password",type:"password",name:"password",value:i,onChange:O}),Object(v.jsx)($.a,{control:Object(v.jsx)(K.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(v.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:f,children:"Sign In"})]})]})]})})}var ie=n(224),le=Object(re.a)();function ue(){var e=Object(m.b)(),t=Object(a.useState)(""),n=Object(l.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(a.useState)(""),b=Object(l.a)(j,2),d=b[0],p=b[1],h=function(e){var t=e.target,n=t.name,a=t.value;switch(n){case"name":return c(a);case"email":return u(a);case"password":return p(a);default:return}};return Object(v.jsx)(ce.a,{theme:le,children:Object(v.jsxs)(ae.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(X.a,{}),Object(v.jsxs)(Q.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(v.jsx)(H.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(v.jsx)(te.a,{})}),Object(v.jsx)(ne.a,{component:"h1",variant:"h5",children:"Register"}),Object(v.jsxs)(Q.a,{component:"form",noValidate:!0,onSubmit:function(t){if(t.preventDefault(),d.length>8)return e(Z.register({name:r,email:i,password:d})),c(""),u(""),p(""),T.b.success("Congrats! You've just signed up!");alert("Too short password")},sx:{mt:3},children:[Object(v.jsxs)(ie.a,{container:!0,spacing:2,children:[Object(v.jsx)(ie.a,{item:!0,xs:12,children:Object(v.jsx)(Y.a,{autoComplete:"given-name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0,onChange:h})}),Object(v.jsx)(ie.a,{item:!0,xs:12,children:Object(v.jsx)(Y.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:h})}),Object(v.jsx)(ie.a,{item:!0,xs:12,children:Object(v.jsx)(Y.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",onChange:h,error:!(d.length<1||d.length>8),helperText:d.length<1||d.length>8?"":"Password is too short!"})}),Object(v.jsx)(ie.a,{item:!0,xs:12})]}),Object(v.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"})]})]})]})})}var je=n(229),be=n(230),de=n(231),pe=n(114),he=n.n(pe),me=n(219),Oe=n(117),fe=n(40),xe={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},ge=function(){var e=Object(m.c)(J.getIsLoggedIn);return Object(v.jsxs)("nav",{children:[Object(v.jsx)(fe.b,{to:"/",style:xe.link,children:"Home"}),e&&Object(v.jsx)(fe.b,{to:"/contacts",style:xe.link,children:"Contacts"})]})},ve=n(113),Ce=n.n(ve),ye={container:{display:"flex",alignItems:"center"},avatar:{marginRight:10},name:{fontWeight:700,marginRight:12}};function _e(){var e=Object(m.b)(),t=Object(m.c)(J.getUserName);return Object(v.jsxs)("div",{style:ye.container,children:[Object(v.jsx)(H.a,{src:"/broken-image.jpg",style:ye.avatar}),Object(v.jsxs)("span",{style:ye.name,children:["Welcome, ",t]}),Object(v.jsx)("button",{className:Ce.a.btn,type:"button",onClick:function(){return e(Z.logOut())},children:"Log out"})]})}var ke={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function we(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(fe.b,{to:"/register",style:ke.link,children:"Sign Up"}),Object(v.jsx)(fe.b,{to:"/login",style:ke.link,children:"Sign In"})]})}function Ie(){var e=Object(m.c)(J.getIsLoggedIn),t=a.useState(!0),n=Object(l.a)(t,2),r=n[0],c=(n[1],a.useState(null)),s=Object(l.a)(c,2),o=s[0],i=s[1],u=function(){i(null)};return Object(v.jsx)(Q.a,{sx:{flexGrow:1},children:Object(v.jsx)(je.a,{position:"static",children:Object(v.jsxs)(be.a,{children:[Object(v.jsx)(ne.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(v.jsx)(ge,{})}),r&&Object(v.jsx)("div",{children:e?Object(v.jsx)(me.a,{onClick:u,children:Object(v.jsx)(_e,{})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(de.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(v.jsx)(he.a,{})}),Object(v.jsx)(Oe.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(o),onClose:u,children:Object(v.jsx)(me.a,{onClick:u,children:Object(v.jsx)(we,{})})})]})})]})})})}function Le(e){var t=e.isLoggedIn,n=e.component;return Object(v.jsx)(v.Fragment,{children:t?Object(v.jsx)(n,{}):Object(v.jsx)(R.a,{to:"/login"})})}function We(e){var t=e.isLoggedIn,n=e.component,a=e.restricted,r=void 0!==a&&a,c=(e.redirectTo,t&&r);return Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(R.a,{to:"/contacts"}):Object(v.jsx)(n,{})})}n(165);var Ne,Se,Fe=function(){var e=Object(m.b)(),t=Object(m.c)(J.getIsLoggedIn),n=Object(m.c)(J.getIsRefreshingCurrentUser);return Object(a.useEffect)((function(){e(Z.refreshCurrentUser())}),[e]),!n&&Object(v.jsxs)("div",{className:i.a.App,children:[Object(v.jsx)(Ie,{}),Object(v.jsxs)(R.d,{children:[Object(v.jsx)(R.b,{path:"/",element:Object(v.jsx)(We,{isLoggedIn:t,component:V})}),Object(v.jsx)(R.b,{path:"/register",element:Object(v.jsx)(We,{isLoggedIn:t,component:ue,restricted:!0})}),Object(v.jsx)(R.b,{path:"/login",element:Object(v.jsx)(We,{isLoggedIn:t,component:oe,redirectTo:"/contacts",restricted:!0})}),Object(v.jsx)(R.b,{path:"/contacts",element:Object(v.jsx)(Le,{isLoggedIn:t,component:z})})]}),Object(v.jsx)(T.a,{autoClose:3e3})]})},Ae=n(15),Te=n(3),Ue=n(23),ze=A.addContacts,Re=A.deleteContacts,Ee=A.fetchContacts,Ve=Object(p.d)([],(Ne={},Object(Te.a)(Ne,Ee.fulfilled,(function(e,t){return t.payload})),Object(Te.a)(Ne,ze.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(Ae.a)(e),[n])})),Object(Te.a)(Ne,Re.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),Ne)),De=Object(p.d)("",Object(Te.a)({},h,(function(e,t){return t.payload}))),qe=Object(Ue.b)({items:Ve,filter:De}),Be=n(43),Me=n(115),Pe=n.n(Me),Ze=Object(p.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshing:!1},extraReducers:(Se={},Object(Te.a)(Se,Z.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(Te.a)(Se,Z.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(Te.a)(Se,Z.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(Te.a)(Se,Z.refreshCurrentUser.pending,(function(e){e.isRefreshing=!0})),Object(Te.a)(Se,Z.refreshCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isRefreshing=!1})),Object(Te.a)(Se,Z.refreshCurrentUser.rejected,(function(e){e.isRefreshing=!1})),Se)}).reducer,Je={key:"auth",storage:Pe.a,whitelist:["token"]},He=Object(Ae.a)(Object(p.f)({serializableCheck:{ignoredActions:[Be.a,Be.f,Be.b,Be.c,Be.d,Be.e]}})),Ge=Object(p.a)({reducer:{contacts:qe,auth:Object(Be.g)(Je,Ze)},middleware:He,devTools:!1}),Xe=Object(Be.h)(Ge),Ye=n(116);s.a.render(Object(v.jsx)(r.a.StrictMode,{children:Object(v.jsx)(m.a,{store:Ge,children:Object(v.jsx)(Ye.a,{persistor:Xe,children:Object(v.jsx)(fe.a,{children:Object(v.jsx)(Fe,{})})})})}),document.getElementById("root"))},37:function(e,t,n){e.exports={title:"ContactForm_title__cdzpo",formWrapper:"ContactForm_formWrapper__3tIIl",labelWrapper:"ContactForm_labelWrapper__zoJu8",form:"ContactForm_form__1Xfju",label:"ContactForm_label__333LT",input:"ContactForm_input__Cfty1",button:"ContactForm_button__n9er7"}},46:function(e,t,n){e.exports={item:"ContactList_item__6sM8D",textWrapper:"ContactList_textWrapper__2JZgh",title:"ContactList_title__24AMn",text:"ContactList_text__1x8xN",button:"ContactList_button__28ppz"}},77:function(e,t,n){e.exports={label:"Filter_label__ILI0F",input:"Filter_input__1sZzL",wrapper:"Filter_wrapper__1IqqT"}}},[[168,1,2]]]);
//# sourceMappingURL=main.5ed96c12.chunk.js.map