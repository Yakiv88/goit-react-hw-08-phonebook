(this["webpackJsonpreact-35-module-1"]=this["webpackJsonpreact-35-module-1"]||[]).push([[0],{110:function(e,t,n){e.exports={App:"App_App__F-nXy",title:"App_title__Leqx5"}},113:function(e,t,n){e.exports={btn:"UserMenu_btn__4ox4d"}},138:function(e,t,n){},168:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(33),s=n.n(c),o=(n(138),n(110)),i=n.n(o),l=n(12),u=n(37),j=n.n(u),b=n(77),d=n.n(b),p=n(20),h=Object(p.b)("contacts/filter"),m=n(16),O=n(69),f=function(e){return e.contacts.items},x=function(e){return e.contacts.filter},g=Object(O.a)([f,x],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),v=n(1);var C=function(){var e=Object(m.c)(x),t=Object(m.b)();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(v.Fragment,{}),Object(v.jsx)("div",{className:d.a.wrapper,children:Object(v.jsxs)("label",{className:d.a.label,children:["Find contacts by name",Object(v.jsx)("input",{className:d.a.input,type:"text",name:"name",value:e,onChange:function(e){return t(h(e.target.value))}})]})})]})},_=n(46),w=n.n(_),y=n(24),k=n.n(y),I=n(42),L=n(31),W=n.n(L);W.a.defaults.baseURL="https://61a60b9e8395690017be9007.mockapi.io";var N=Object(p.c)("contacts/fetchContacts",function(){var e=Object(I.a)(k.a.mark((function e(t,n){var r,a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,W.a.get("/contacts");case 4:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),F=Object(p.c)("contacts/addContact",function(){var e=Object(I.a)(k.a.mark((function e(t,n){var r,a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,W.a.post("/contacts",t);case 4:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:e.prev=9,e.t0=e.catch(1),r(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(p.c)("contacts/deleteContact",function(){var e=Object(I.a)(k.a.mark((function e(t,n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWidthValue,e.prev=1,e.next=4,W.a.delete("/contacts/".concat(t));case 4:if(200!==e.sent.status){e.next=9;break}return e.abrupt("return",t);case 9:throw new Error({message:"error"});case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t,n){return e.apply(this,arguments)}}()),A={addContacts:F,deleteContacts:S,fetchContacts:N},R=n(29),U=function(){var e=Object(m.c)(g),t=Object(m.b)();return Object(r.useEffect)((function(){t(A.fetchContacts())}),[t]),Object(v.jsx)("div",{className:w.a.listWrapper,children:Object(v.jsx)("ul",{className:w.a.contactsList,children:e.map((function(e){var n=e.name,r=e.number,a=e.id;return Object(v.jsxs)("ol",{className:w.a.item,children:[Object(v.jsxs)("div",{className:w.a.textWrapper,children:[Object(v.jsxs)("p",{className:w.a.text,children:[n,":"]}),Object(v.jsx)("p",{className:w.a.text,children:r})]}),Object(v.jsx)("button",{className:w.a.button,type:"button",onClick:function(){return t(A.deleteContacts(a,R.b.success("Contact ".concat(n," has been deleted successfully!"))))},children:"Delete"})]},a)}))})})};var E=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(l.a)(c,2),o=s[0],i=s[1],u=Object(m.c)(f),b=Object(m.b)(),d=function(e){switch(e.target.name){case"name":a(e.target.value);break;case"number":i(e.target.value);break;default:return}},p=function(){a(""),i("")};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:j.a.formWrapper,children:[Object(v.jsx)("h1",{className:j.a.title,children:"Phonebook"}),Object(v.jsxs)("form",{className:j.a.form,onSubmit:function(e){if(e.preventDefault(),u.find((function(e){return e.name.toLowerCase()===n.toLowerCase()})))return alert("This contact has already been added to the list");b(A.addContacts({name:n,number:o})),R.b.success("Contact ".concat(n," has been added to the list~")),p()},children:[Object(v.jsxs)("div",{className:j.a.labelWrapper,children:[Object(v.jsxs)("label",{className:j.a.label,children:["Name",Object(v.jsx)("input",{className:j.a.input,value:n,type:"text",name:"name",placeholder:"Name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",onChange:d})]}),Object(v.jsxs)("label",{className:j.a.label,children:["Number",Object(v.jsx)("input",{className:j.a.input,type:"tel",value:o,name:"number",placeholder:"Number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",onChange:d})]})]}),Object(v.jsx)("button",{className:j.a.button,children:"Add contact"})]})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("h2",{className:j.a.title,children:"Contacts"}),Object(v.jsx)(C,{}),Object(v.jsx)(U,{})]})]})},z=n(14),T={container:{minHeight:"calc(100vh - 50px)",display:"flex",alignItems:"center",justifyContent:"center"},title:{fontWeight:500,fontSize:48,textAlign:"center"}},D=function(){return Object(v.jsx)("div",{style:T.container,children:Object(v.jsx)("h1",{style:T.title,children:"Welcome to phonebook "})})};W.a.defaults.baseURL="https://connections-api.herokuapp.com";var V=function(e){W.a.defaults.headers.common.Authorization="Bearer ".concat(e)},q=function(){W.a.defaults.headers.common.Authorization=""},M=Object(p.c)("auth/register",function(){var e=Object(I.a)(k.a.mark((function e(t,n){var r,a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,W.a.post("/users/signup",t);case 4:return a=e.sent,c=a.data,V(c.token),e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(1),r(R.b.error("Oops! Try again please!")),new Error({message:"error"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),Z=Object(p.c)("auth/login",function(){var e=Object(I.a)(k.a.mark((function e(t,n){var r,a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rejectWithValue,e.prev=1,e.next=4,W.a.post("/users/login",t);case 4:return a=e.sent,c=a.data,V(c.token),e.abrupt("return",c);case 10:throw e.prev=10,e.t0=e.catch(1),r(R.b.error("Oops! Try again please!")),new Error({message:"error"});case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(p.c)("auth/logout",Object(I.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W.a.post("/users/logout");case 3:q(),e.next=9;break;case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",console.log("error on logOut",e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))),J=Object(p.c)("auth/refresh",function(){var e=Object(I.a)(k.a.mark((function e(t,n){var r,a,c,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.getState(),null!==(a=r.auth.token)){e.next=4;break}return e.abrupt("return",n.rejectWithValue());case 4:return V(a),e.prev=5,e.next=8,W.a.get("/users/current");case 8:return c=e.sent,s=c.data,e.abrupt("return",s);case 13:return e.prev=13,e.t0=e.catch(5),e.abrupt("return",console.log("error on refresh",e.t0));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()),P={register:M,logIn:Z,logOut:B,refreshCurrentUser:J},H={getIsLoggedIn:function(e){return e.auth.isLoggedIn},getUserName:function(e){return e.auth.user.name},getIsRefreshingCurrentUser:function(e){return e.auth.isRefreshingCurrentUser},getError:function(e){return e.auth.error}},X=n(222),G=n(223),Y=n(212),$=n(216),K=n(228),Q=n(218),ee=n(226),te=n(74),ne=n.n(te),re=n(227),ae=n(225),ce=n(118),se=n(221),oe=Object(ce.a)();function ie(){var e=Object(m.b)(),t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(r.useState)(null),b=Object(l.a)(j,2),d=(b[0],b[1]),p=Object(m.c)(H.getIsLoggedIn),h=Object(m.c)(H.getError);Object(r.useEffect)((function(){d(h)}),[h]);var O=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"email":return c(r);case"password":return u(r);default:return}},f=function(t){t.preventDefault(),e(P.logIn({email:a,password:i})),R.b.success("Congrats! You've just successfully signed in!"),c(""),u("")};return!p&&Object(v.jsx)(se.a,{theme:oe,children:Object(v.jsxs)(ae.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(Y.a,{}),Object(v.jsxs)(ee.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(v.jsx)(X.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(v.jsx)(ne.a,{})}),Object(v.jsx)(re.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(v.jsxs)(ee.a,{component:"form",onSubmit:f,noValidate:!0,sx:{mt:1},children:[Object(v.jsx)($.a,{margin:"normal",required:!0,fullWidth:!0,label:"Email Address",id:"email",autoFocus:!0,type:"email",name:"email",value:a,onChange:O}),Object(v.jsx)($.a,{margin:"normal",required:!0,fullWidth:!0,label:"Password",id:"password",autoComplete:"current-password",type:"password",name:"password",value:i,onChange:O}),Object(v.jsx)(K.a,{control:Object(v.jsx)(Q.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(v.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},onClick:f,children:"Sign In"})]})]})]})})}var le=n(224),ue=Object(ce.a)();function je(){var e=Object(m.b)(),t=Object(r.useState)(""),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(l.a)(s,2),i=o[0],u=o[1],j=Object(r.useState)(""),b=Object(l.a)(j,2),d=b[0],p=b[1],h=function(e){var t=e.target,n=t.name,r=t.value;switch(n){case"name":return c(r);case"email":return u(r);case"password":return p(r);default:return}};return Object(v.jsx)(se.a,{theme:ue,children:Object(v.jsxs)(ae.a,{component:"main",maxWidth:"xs",children:[Object(v.jsx)(Y.a,{}),Object(v.jsxs)(ee.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(v.jsx)(X.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(v.jsx)(ne.a,{})}),Object(v.jsx)(re.a,{component:"h1",variant:"h5",children:"Register"}),Object(v.jsxs)(ee.a,{component:"form",noValidate:!0,onSubmit:function(t){if(t.preventDefault(),d.length>8)return e(P.register({name:a,email:i,password:d})),c(""),u(""),p(""),R.b.success("Congrats! You've just signed up!");alert("Too short password")},sx:{mt:3},children:[Object(v.jsxs)(le.a,{container:!0,spacing:2,children:[Object(v.jsx)(le.a,{item:!0,xs:12,children:Object(v.jsx)($.a,{autoComplete:"given-name",name:"name",required:!0,fullWidth:!0,id:"name",label:"Name",autoFocus:!0,onChange:h})}),Object(v.jsx)(le.a,{item:!0,xs:12,children:Object(v.jsx)($.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:h})}),Object(v.jsx)(le.a,{item:!0,xs:12,children:Object(v.jsx)($.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",onChange:h,error:!(d.length<1||d.length>8),helperText:d.length<1||d.length>8?"":"Password is too short!"})}),Object(v.jsx)(le.a,{item:!0,xs:12})]}),Object(v.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"})]})]})]})})}var be=n(229),de=n(230),pe=n(231),he=n(114),me=n.n(he),Oe=n(219),fe=n(117),xe=n(39),ge={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},ve=function(){var e=Object(m.c)(H.getIsLoggedIn);return Object(v.jsxs)("nav",{children:[Object(v.jsx)(xe.b,{to:"/",style:ge.link,children:"Home"}),e&&Object(v.jsx)(xe.b,{to:"/contacts",style:ge.link,children:"Contacts"})]})},Ce=n(113),_e=n.n(Ce),we={container:{display:"flex",alignItems:"center"},avatar:{marginRight:10},name:{fontWeight:700,marginRight:12}};function ye(){var e=Object(m.b)(),t=Object(m.c)(H.getUserName);return Object(v.jsxs)("div",{style:we.container,children:[Object(v.jsx)(X.a,{src:"/broken-image.jpg",style:we.avatar}),Object(v.jsxs)("span",{style:we.name,children:["Welcome, ",t]}),Object(v.jsx)("button",{className:_e.a.btn,type:"button",onClick:function(){return e(P.logOut())},children:"Log out"})]})}var ke={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function Ie(){return Object(v.jsxs)("div",{children:[Object(v.jsx)(xe.b,{to:"/register",style:ke.link,children:"Sign Up"}),Object(v.jsx)(xe.b,{to:"/login",style:ke.link,children:"Sign In"})]})}function Le(){var e=Object(m.c)(H.getIsLoggedIn),t=r.useState(!0),n=Object(l.a)(t,2),a=n[0],c=(n[1],r.useState(null)),s=Object(l.a)(c,2),o=s[0],i=s[1],u=function(){i(null)};return Object(v.jsx)(ee.a,{sx:{flexGrow:1},children:Object(v.jsx)(be.a,{position:"static",children:Object(v.jsxs)(de.a,{children:[Object(v.jsx)(re.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(v.jsx)(ve,{})}),a&&Object(v.jsx)("div",{children:e?Object(v.jsx)(Oe.a,{onClick:u,children:Object(v.jsx)(ye,{})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(pe.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit",children:Object(v.jsx)(me.a,{})}),Object(v.jsx)(fe.a,{id:"menu-appbar",anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(o),onClose:u,children:Object(v.jsx)(Oe.a,{onClick:u,children:Object(v.jsx)(Ie,{})})})]})})]})})})}function We(e){var t=e.isLoggedIn,n=e.component;return Object(v.jsx)(v.Fragment,{children:t?Object(v.jsx)(n,{}):Object(v.jsx)(z.a,{to:"/login"})})}function Ne(e){var t=e.isLoggedIn,n=e.component,r=e.restricted,a=void 0!==r&&r,c=(e.redirectTo,t&&a);return Object(v.jsx)(v.Fragment,{children:c?Object(v.jsx)(z.a,{to:"/contacts"}):Object(v.jsx)(n,{})})}n(165);var Fe,Se,Ae=function(){var e=Object(m.b)(),t=Object(m.c)(H.getIsLoggedIn),n=Object(m.c)(H.getIsRefreshingCurrentUser);return Object(r.useEffect)((function(){e(P.refreshCurrentUser())}),[e]),!n&&Object(v.jsxs)("div",{className:i.a.App,children:[Object(v.jsx)(Le,{}),Object(v.jsxs)(z.d,{children:[Object(v.jsx)(z.b,{path:"/",element:Object(v.jsx)(Ne,{isLoggedIn:t,component:D})}),Object(v.jsx)(z.b,{path:"/register",element:Object(v.jsx)(Ne,{isLoggedIn:t,component:je,restricted:!0})}),Object(v.jsx)(z.b,{path:"/login",element:Object(v.jsx)(Ne,{isLoggedIn:t,component:ie,redirectTo:"/contacts",restricted:!0})}),Object(v.jsx)(z.b,{path:"/contacts",element:Object(v.jsx)(We,{isLoggedIn:t,component:E})})]}),Object(v.jsx)(R.a,{autoClose:3e3})]})},Re=n(3),Ue=n(17),Ee=n(23),ze=A.addContacts,Te=A.deleteContacts,De=A.fetchContacts,Ve=Object(p.d)([],(Fe={},Object(Re.a)(Fe,De.fulfilled,(function(e,t){return t.payload})),Object(Re.a)(Fe,ze.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(Ue.a)(e),[n])})),Object(Re.a)(Fe,Te.fulfilled,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),Fe)),qe=Object(p.d)("",Object(Re.a)({},h,(function(e,t){return t.payload}))),Me=Object(Ee.b)({items:Ve,filter:qe}),Ze=n(43),Be=n(115),Je=n.n(Be),Pe=Object(p.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isRefreshing:!1},extraReducers:(Se={},Object(Re.a)(Se,P.register.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(Re.a)(Se,P.logIn.fulfilled,(function(e,t){e.user=t.payload.user,e.token=t.payload.token,e.isLoggedIn=!0})),Object(Re.a)(Se,P.logOut.fulfilled,(function(e,t){e.user={name:null,email:null},e.token=null,e.isLoggedIn=!1})),Object(Re.a)(Se,P.refreshCurrentUser.pending,(function(e){e.isRefreshing=!0})),Object(Re.a)(Se,P.refreshCurrentUser.fulfilled,(function(e,t){e.user=t.payload,e.isLoggedIn=!0,e.isRefreshing=!1})),Object(Re.a)(Se,P.refreshCurrentUser.rejected,(function(e){e.isRefreshing=!1})),Se)}).reducer,He={key:"auth",storage:Je.a,whitelist:["token"]},Xe=Object(p.a)({reducer:{auth:Object(Ze.g)(He,Pe),contacts:Me},middleware:function(e){return e({serializableCheck:{ignoredActions:[Ze.a,Ze.f,Ze.b,Ze.c,Ze.d,Ze.e]}})},devTools:!1}),Ge=Object(Ze.h)(Xe),Ye=n(116);s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(m.a,{store:Xe,children:Object(v.jsx)(Ye.a,{persistor:Ge,children:Object(v.jsx)(xe.a,{children:Object(v.jsx)(Ae,{})})})})}),document.getElementById("root"))},37:function(e,t,n){e.exports={title:"ContactForm_title__1RIHc",formWrapper:"ContactForm_formWrapper__IlJ9U",labelWrapper:"ContactForm_labelWrapper__2MfL0",form:"ContactForm_form__3zVLS",label:"ContactForm_label__Z97D6",input:"ContactForm_input__CJXAl",button:"ContactForm_button__3xRXL"}},46:function(e,t,n){e.exports={item:"ContactList_item__6sM8D",textWrapper:"ContactList_textWrapper__2JZgh",title:"ContactList_title__24AMn",text:"ContactList_text__1x8xN",button:"ContactList_button__28ppz"}},77:function(e,t,n){e.exports={label:"Filter_label__ILI0F",input:"Filter_input__1sZzL",wrapper:"Filter_wrapper__1IqqT"}}},[[168,1,2]]]);
//# sourceMappingURL=main.c37d5a2f.chunk.js.map